---
output: hugodown::md_document
title: "TidyTuesday Penguins"
summary: ""
author: "rbkeeney"
tags: []
date: 2020-07-28
---

## Introduction 

In my 1st ever TidyTuesday, I was inspired by Asmae Toumi's (@asmae_toumi) recent twitter post to create a caladown site through github. Here's a link to the guide she posted: [Youtube Video](https://www.youtube.com/watch?v=HtQhG80MKQE)

It took Asmae 15 minutes to deploy her site, it took me about 4 hours because I've never used git or created a github repo from R before today. After learning a few new cuss words, crashing R multiple times, learning about how to remove ".git/index.lock" files, creating tokens and SSH keys, and troubleshooting why my R "Git" repo would link and post... but not allow me to commit and push data I sort of gave up.

Well, I mean that I downloaded Github for my desktop and dragged the new doc files into the repo. 

So. Much. Fun.

## Getting Started

My Tidytuesday entry is more about creating a caladown site, using rMarkdown and some datapasta, and perhaps making a animated plot.
For more on rMarkdown: [rMarkdown Intro](https://rmarkdown.rstudio.com/articles_intro.html)

1st, let's see how to install the datasets, for more detail check out the post  [here](https://github.com/rfordatascience/tidytuesday/blob/master/data/2020/2020-07-28/readme.md)

```{r install and libraries}
#install.packages("tidytuesdayR")
library(tidytuesdayR)
library(tidyverse)
```

After that, it's just a simple exercise to all in the data. BTW, ctrl+alt+i -> new code section

```{r}
tuesdata <- tidytuesdayR::tt_load('2020-07-28')
penguins <- tuesdata$penguins
```

## Datapasta

Great, so we've got the data... but we're making an rMarkdown post, and that means we want to make it pretty. There's a neat little package out there called datapasta... you can load it like so:

```{r}
#install.packages("datapasta")
```

For more detail, you can visit [Datapasta](https://github.com/MilesMcBain/datapasta).

Datapasta allows me to paste data from the web directly into my code in about 2 seconds.

1. Control+C (windows)
2. Control+Shift+T (after setting up the new keyboard shortcuts)

Add in a little gt:gt() or knitr:kable() and you've got yourself a nice little table to play with, *additional formatting purely optional*.

```{r}
tibble::tribble(
               ~variable,    ~class,                                               ~description,
               "species", "integer",              "Penguin species (Adelie, Gentoo, Chinstrap)",
                "island", "integer",         "Island where recorded (Biscoe, Dream, Torgersen)",
        "bill_length_mm",  "double", "Bill length in millimeters (also known as culmen length)",
         "bill_depth_mm",  "double",   "Bill depth in millimeters (also known as culmen depth)",
     "flipper_length_mm", "integer",                                     "Flipper length in mm",
           "body_mass_g", "integer",                                       "Body mass in grams",
                   "sex", "integer",                                        "sex of the animal",
                  "year", "integer",                                            "year recorded"
     ) %>% 
     gt::gt()
```

## Animated plot

Now that we 

```{r}
p1 <- penguins %>% 
     ggplot(aes(y = flipper_length_mm, x = bill_length_mm,color = species,group = species)) +
     geom_smooth(method=lm) +
     geom_point(size = 2, alpha = 0.6) +
     theme_bw()  +
     labs(title = "Palmer Penguins", 
          caption = "palmerpenguins data by Dr. Kristen Gorman",
          x = "Bill Length (mm)", 
          y = "Flipper Length (mm)")
```


```{r}
p1
```

To create an animation from our picture, we need to the gganimate library... and I like to use glue to easily paste labels from data, here I use the "closest_state" command to update the subtitle with which species is being displayed.

```{r}
library(gganimate)
library(glue)

p1_anim <- p1 +
     transition_states(species, transition_length = 2, state_length = 3) +
     labs(subtitle = "Species: {closest_state}") +
     ease_aes('cubic-in-out')
```
To display our animation, we just call animate()

```{r}
animate(p1_anim)
```

And finally, we can save our simple animation locally to use later (Twitter anyone?).

```{r}
anim_save(filename = 'Rplot_animation.gif', animation = last_animation(),path = "C:\\Users\\keene\\Desktop")
```

